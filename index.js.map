{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46122064-27fc1540b81cd289c7b100078';\nconst BASE_URL = `https://pixabay.com/api/`;\n\nexport async function fetchImages(query, page = 1) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n  try {\n    const { data } = await axios.get(url);\n    return data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw new Error();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n\n  if (images.length === 0) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\"> \n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"card-img\"/>\n  <ul class=\"desc-list\">\n    <li class=\"desc-item\">\n      <p class=\"desc-value\">Likes</p>\n      <p class=\"desc-quantity\">${likes}</p>\n    </li>\n    <li class=\"desc-item\">\n      <p class=\"desc-value\">Views</p>\n      <p class=\"desc-quantity\">${views}</p>\n    </li>\n    <li class=\"desc-item\">\n      <p class=\"desc-value\">Comments</p>\n      <p class=\"desc-quantity\">${comments}</p>\n    </li>\n    <li class=\"desc-item\">\n      <p class=\"desc-value\">Downloads</p>\n      <p class=\"desc-quantity\">${downloads}</p>\n    </li>\n  </ul>\n </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nlet lightbox = new SimpleLightbox('.gallery a');\n\nlet page = 1;\nlet searchQuery = '';\nloadMoreButton.classList.add('hidden');\n\nsearchForm.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  searchQuery = event.currentTarget.elements.query.value.trim();\n  page = 1;\n\n  if (!searchQuery) {\n    iziToast.error({\n      message: 'Please enter a search term.',\n    });\n    return;\n  }\n\n  gallery.innerHTML = '';\n\n  loader.classList.add('isVisible');\n  await loadImages();\n  loader.classList.remove('isVisible');\n}\n\nasync function loadImages() {\n  try {\n    const data = await fetchImages(searchQuery, page);\n    renderImages(data.hits);\n    lightbox.refresh();\n    toggleLoadMoreButton(data.hits.length);\n\n    if (page * 15 >= data.totalHits) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreButton.classList.add('hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Failed loading images.',\n    });\n  }\n}\n\nfunction toggleLoadMoreButton(resultsCount) {\n  if (resultsCount < 15) {\n    loadMoreButton.classList.add('hidden');\n  } else {\n    loadMoreButton.classList.remove('hidden');\n  }\n}\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n  loader.classList.add('isVisible');\n  await loadImages();\n  loader.classList.remove('isVisible');\n  scrollPage();\n});\n\nfunction scrollPage() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","url","data","axios","error","renderImages","images","gallery","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loader","loadMoreButton","lightbox","SimpleLightbox","searchQuery","handleSubmit","event","loadImages","toggleLoadMoreButton","resultsCount","scrollPage","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,MAAMC,EAAM,GAAGJ,CAAQ,QAAQD,CAAO,MAAMG,CAAK,6EAA6EC,CAAI,GAClI,GAAI,CACF,KAAM,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAM,IAAIF,CAAG,EACpC,OAAOC,CACR,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,KACX,CACH,CCXO,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE7CD,EAAO,SAAW,GACpBE,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACR,CAAK,EAGH,MAAMC,EAASH,EACZ,IACC,CAAC,CACC,aAAAI,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,mBACOL,CAAa;AAAA,cAClBD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,iCAIPC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,iCAIRC,CAAS;AAAA;AAAA;AAAA,OAIrC,EACA,KAAK,EAAE,EACVT,EAAQ,mBAAmB,YAAaE,CAAM,CAChD,CCzCA,MAAMQ,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCX,EAAU,SAAS,cAAc,UAAU,EAC3CY,EAAiB,SAAS,cAAc,YAAY,EAC1D,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAE1CrB,EAAO,EACPsB,EAAc,GAClBH,EAAe,UAAU,IAAI,QAAQ,EAErCF,EAAW,iBAAiB,SAAUM,CAAY,EAElD,eAAeA,EAAaC,EAAO,CAKjC,GAJAA,EAAM,eAAc,EACpBF,EAAcE,EAAM,cAAc,SAAS,MAAM,MAAM,OACvDxB,EAAO,EAEH,CAACsB,EAAa,CAChBd,EAAS,MAAM,CACb,QAAS,6BACf,CAAK,EACD,MACD,CAEDD,EAAQ,UAAY,GAEpBW,EAAO,UAAU,IAAI,WAAW,EAChC,MAAMO,EAAU,EAChBP,EAAO,UAAU,OAAO,WAAW,CACrC,CAEA,eAAeO,GAAa,CAC1B,GAAI,CACF,MAAMvB,EAAO,MAAMJ,EAAYwB,EAAatB,CAAI,EAChDK,EAAaH,EAAK,IAAI,EACtBkB,EAAS,QAAO,EAChBM,EAAqBxB,EAAK,KAAK,MAAM,EAEjCF,EAAO,IAAME,EAAK,YACpBM,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EACDW,EAAe,UAAU,IAAI,QAAQ,EAExC,MAAe,CACdX,EAAS,MAAM,CACb,QAAS,wBACf,CAAK,CACF,CACH,CAEA,SAASkB,EAAqBC,EAAc,CACtCA,EAAe,GACjBR,EAAe,UAAU,IAAI,QAAQ,EAErCA,EAAe,UAAU,OAAO,QAAQ,CAE5C,CAEAA,EAAe,iBAAiB,QAAS,SAAY,CACnDnB,GAAQ,EACRkB,EAAO,UAAU,IAAI,WAAW,EAChC,MAAMO,EAAU,EAChBP,EAAO,UAAU,OAAO,WAAW,EACnCU,GACF,CAAC,EAED,SAASA,GAAa,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}